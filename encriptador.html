<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encriptador</title>
    <link rel="stylesheet" href="style.css">
</head>

<script>
var validarMayusculas = false;
//window.onload = ocultar;

function validaMayusculas(textoEntrada) {
    const pattern = new RegExp('^[a-z 0-9 \u00F1]+$');
    validarMayusculas = !pattern.test(textoEntrada);
    return validarMayusculas;
}

function encriptartexto(){
    var textoEntrada = document.getElementById("textoEntrada").value;
    if(validaMayusculas(textoEntrada)){
        return alert("El texto contine mayusculas o caracteres especiales");
    }
    ocultar();
    mostar();
    var textoEncriptado = textoEntrada.replace(/e/img, "enter")
                    .replace(/o/img, "ober")
                    .replace(/i/img, "imes")
                    .replace(/a/img, "ai")
                    .replace(/u/img, "ufat");
    console.log(textoEncriptado);
    document.getElementById("textoSalida").innerHTML = textoEncriptado;
}

function desencriptartexto(){
    var textoEntrada = document.getElementById("textoEntrada").value;
    if(validaMayusculas(textoEntrada)){
        return alert("El texto contine mayusculas o caracteres especiales");
    }
    ocultar();
    mostar();
    var textoEncriptado = textoEntrada.replace(/enter/img, "e")
                    .replace(/ober/img, "o")
                    .replace(/imes/img, "i")
                    .replace(/ai/img, "a")
                    .replace(/ufat/img, "u");
    console.log(textoEncriptado);
    document.getElementById("textoSalida").innerHTML = textoEncriptado;
}

function copiar(){
    var textoACopiar = document.getElementById("textoSalida").value; 
    navigator.clipboard.writeText(textoACopiar);
}

function ocultar(){
    document.querySelector("#muneco").classList.add("ocultar");
    document.querySelector("#noTexto").classList.add("ocultar");
    document.querySelector("#ingreseTexto").classList.add("ocultar");
}

function mostar(){
    document.querySelector("#textoSalida").classList.replace("ocultar","mostrar");
    document.querySelector("#copiar").style.display="block";
}

function limpiar(){
    document.getElementById("textoEntrada").value = '';
}

</script>
<body>
    <div id="cajonTextoEntrada">
        <img id="logo" src="imagenes/Logo.png" alt="Logo">
        <textarea placeholder="Ingrese su texto" id="textoEntrada"></textarea>
        <div id="btnsEncriptar">
            <div class="alerta-mayuscula">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi-exclamation-circle-fill" viewBox="0 0 16 16">
                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                </svg>
                <p>Solo letras min√∫sculas y sin acentos</p>
            </div>
            <button id="encriptar" onclick="encriptartexto()">Encriptar</button>
            <button id="desencriptar" onclick="desencriptartexto()">Desencriptar</button>    
            <button id="limpiar" onclick="limpiar()">Limpiar</button>
        </div>
    </div>
    <div id="cajonTextoSalida">
        <img id="muneco" src="imagenes/Muneco.png" alt="Imagen no encontrada">
        <h3 id="noTexto">No se ha encontrado un texto</h3>
        <p id="ingreseTexto">Ingrese un texto para encriptar o desencriptar</p>
        <textarea id="textoSalida" class="ocultar"></textarea>
        <button id="copiar" style="display: none;" onclick="copiar()">Copiar</button>
    </div>
</body>
</html>